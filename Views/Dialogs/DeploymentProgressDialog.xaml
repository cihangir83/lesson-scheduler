<!-- IMPORTANT: Build generator hint to ensure .g.cs is emitted -->
<!-- Generator directive below helps some tooling; primary fix is csproj Page Include already done -->
<Window x:Class="LessonScheduler.Views.Dialogs.DeploymentProgressDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:ClassModifier="public"
        Title="İşlem Başlatıldı"
        Height="260" Width="520"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="#F5F5F5"
        ShowInTaskbar="False"
        Topmost="True"
        x:Name="RootWindow">
    <Border Background="White" Margin="15" CornerRadius="8"
            BorderBrush="#E0E0E0" BorderThickness="1">
        <Border.Effect>
            <DropShadowEffect Color="Gray" Direction="315" ShadowDepth="3" Opacity="0.3"/>
        </Border.Effect>

        <Grid x:Name="RootGrid" Margin="16">
            <Grid.Resources>
                <!-- Spinner Storyboard -->
                <Storyboard x:Key="SpinnerStoryboard" RepeatBehavior="Forever">
                    <DoubleAnimation Storyboard.TargetName="SpinnerRotate"
                                     Storyboard.TargetProperty="Angle"
                                     From="0" To="360" Duration="0:0:1.2" />
                </Storyboard>
            </Grid.Resources>

            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <StackPanel Grid.Row="0" HorizontalAlignment="Center" VerticalAlignment="Center">
                <!-- Simple animation: rotating ellipse built with storyboard -->
                <Grid Width="72" Height="72" Margin="0,0,0,10">
                    <Grid.RenderTransform>
                        <RotateTransform x:Name="SpinnerRotate" Angle="0" CenterX="36" CenterY="36"/>
                    </Grid.RenderTransform>
                    <Ellipse Width="72" Height="72" Stroke="#90CAF9" StrokeThickness="8" Opacity="0.4"/>
                    <Path Data="M36,0 A36,36 0 1 1 0,36" Stroke="#2196F3" StrokeThickness="8" Fill="Transparent" StrokeStartLineCap="Round" StrokeEndLineCap="Round"/>
                </Grid>

                <TextBlock x:Name="TitleText" Text="Dağıtıma başlanıyor..."
                           FontSize="18" FontWeight="Bold" HorizontalAlignment="Center" Foreground="#1F2937" Margin="0,4,0,2"/>
                <TextBlock x:Name="SubText" Text="Lütfen bekleyin, çözüm hesaplanıyor."
                           FontSize="13" HorizontalAlignment="Center" Foreground="#374151" />

                <ProgressBar x:Name="ProgressBar" IsIndeterminate="True" Height="8" Margin="0,16,0,0" Foreground="#2196F3"/>
            </StackPanel>

            <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right">
                <Button x:Name="CloseButton" Content="Kapat" Width="90" Height="30" Margin="0,10,0,0"
                        Visibility="Collapsed" Click="CloseButton_Click"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>