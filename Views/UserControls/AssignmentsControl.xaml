<UserControl x:Class="LessonScheduler.Views.UserControls.AssignmentsControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Class Selection -->
        <GroupBox Grid.Row="0" Header="🏫 Sınıf Seçimi" Margin="10"
                  Style="{DynamicResource ModernGroupBox}">
            <ComboBox ItemsSource="{Binding Classes}"
                      SelectedItem="{Binding SelectedClass}"
                      FontSize="14"
                      Padding="8,4"
                      Margin="10"
                      Background="{DynamicResource CardBrush}"
                      Foreground="{DynamicResource TextPrimaryBrush}"
                      BorderBrush="{DynamicResource BorderBrush}"/>
        </GroupBox>

        <!-- Assignments DataGrid -->
        <GroupBox Grid.Row="1" Header="📝 Ders Atamaları" Margin="10"
                  Style="{DynamicResource ModernGroupBox}">
            <DataGrid ItemsSource="{Binding Assignments}"
                      SelectedItem="{Binding SelectedAssignment}"
                      AutoGenerateColumns="False"
                      IsReadOnly="True"
                      Style="{DynamicResource ModernDataGrid}"
                      Margin="10">
                
                <DataGrid.ColumnHeaderStyle>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="Background" Value="LightBlue"/>
                        <Setter Property="FontWeight" Value="Bold"/>
                        <Setter Property="HorizontalContentAlignment" Value="Center"/>
                        <Setter Property="Padding" Value="8,4"/>
                    </Style>
                </DataGrid.ColumnHeaderStyle>

                <DataGrid.CellStyle>
                    <Style TargetType="DataGridCell">
                        <Setter Property="TextBlock.TextAlignment" Value="Center"/>
                        <Setter Property="VerticalContentAlignment" Value="Center"/>
                        <Setter Property="Padding" Value="4"/>
                        <Setter Property="BorderBrush" Value="Gray"/>
                        <Setter Property="BorderThickness" Value="0.5"/>
                    </Style>
                </DataGrid.CellStyle>

                <DataGrid.Columns>
                    <DataGridTextColumn Header="Ders" 
                                        Binding="{Binding Ders}" 
                                        Width="*"
                                        MinWidth="120">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="FontWeight" Value="Bold"/>
                                <Setter Property="HorizontalAlignment" Value="Center"/>
                                <Setter Property="VerticalAlignment" Value="Center"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>

                    <DataGridTextColumn Header="Öğretmen" 
                                        Binding="{Binding Ogretmen}" 
                                        Width="*"
                                        MinWidth="120">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment" Value="Center"/>
                                <Setter Property="VerticalAlignment" Value="Center"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>

                    <DataGridTextColumn Header="Toplam Saat" 
                                        Binding="{Binding ToplamSaatText}" 
                                        Width="100">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment" Value="Center"/>
                                <Setter Property="VerticalAlignment" Value="Center"/>
                                <Setter Property="FontWeight" Value="Bold"/>
                                <Setter Property="Foreground" Value="DarkBlue"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>

                    <DataGridTextColumn Header="Blok Yapısı" 
                                        Binding="{Binding BlokYapisiText}" 
                                        Width="*"
                                        MinWidth="150">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment" Value="Center"/>
                                <Setter Property="VerticalAlignment" Value="Center"/>
                                <Setter Property="FontFamily" Value="Consolas"/>
                                <Setter Property="Foreground" Value="DarkGreen"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                </DataGrid.Columns>

                <!-- Double-click to edit -->
                <DataGrid.InputBindings>
                    <MouseBinding MouseAction="LeftDoubleClick" 
                                  Command="{Binding EditAssignmentCommand}"/>
                </DataGrid.InputBindings>
            </DataGrid>
        </GroupBox>

        <!-- Action Buttons -->
        <GroupBox Grid.Row="2" Header="⚙️ İşlemler" Margin="10"
                  Style="{DynamicResource ModernGroupBox}">
            <StackPanel Orientation="Horizontal" 
                        HorizontalAlignment="Center" 
                        Margin="10">
                <Button Content="➕ Ders Ata" 
                        Command="{Binding AddAssignmentCommand}"
                        Width="120" Height="40" 
                        Margin="5"
                        Style="{DynamicResource SuccessButton}"/>
                
                <Button Content="✏️ Seçileni Düzenle" 
                        Command="{Binding EditAssignmentCommand}"
                        Width="140" Height="40" 
                        Margin="5"
                        Style="{DynamicResource WarningButton}"/>
                
                <Button Content="🗑️ Seçileni Sil" 
                        Command="{Binding DeleteAssignmentCommand}"
                        Width="120" Height="40"
                        Margin="5"
                        Style="{DynamicResource ErrorButton}"/>
            </StackPanel>
        </GroupBox>
    </Grid>
</UserControl>